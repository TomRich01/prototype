function twentyfour_gallery(a,b){this.prefix="twentyfour";this.slides=[];this.templates={gallery:null,stage:null,media_bar:null};this.buttons={fullscreen:null,stage_nav_left:null,stage_nav_right:null,tray_nav_left:null,tray_nav_right:null};this.settings={fullscreen_icon_class:"icon-screen-full",play_icon_class:"icon-playback-play",pause_icon_class:"icon-playback-pause",nav_left_icon_class:"icon-angle-left",nav_right_icon_class:"icon-angle-right",toggle_tray_icon_class:"icon-th",gallery_template_selector:"#twentyfour_gallery_template",tray_template_selector:"#twentyfour_gallery_tray_template",media_bar_template_selector:"#twentyfour_gallery_media_bar_template",stage_template_selector:"#twentyfour_gallery_stage_template",query_selector:".gallery24"};this.go_fullscreen=function(){var c=this.container[0];if(c.requestFullscreen){c.requestFullscreen()}else{if(c.mozRequestFullScreen){c.mozRequestFullScreen()}else{if(c.webkitRequestFullscreen){c.webkitRequestFullscreen()}else{if(c.msRequestFullscreen){c.msRequestFullscreen()}}}}this.container.addClass("fullscreen")};this.exit_fullscreen=function(){if(document.exitFullscreen){document.exitFullscreen()}else{if(document.mozCancelFullScreen){document.mozCancelFullScreen()}else{if(document.webkitExitFullscreen){document.webkitExitFullscreen()}else{if(document.msExitFullscreen){document.msExitFullscreen()}}}}this.container.removeClass("fullscreen")};this.toggle_fullscreen=function(e){var c,d;c=this.container;if(this.container.hasClass("fullscreen")){this.exit_fullscreen();console.debug("here")}else{this.go_fullscreen().bind(this);console.debug("else")}};this.go_to_slide=function(c){alert(c)};this.add_event_listeners=function(){var c=this;$(this.container).find(".action_area.nav.left").click(function(){});this.buttons.fullscreen.click(c.toggle_fullscreen.bind(c))};this.generate_slides=function(){var d="";for(var c=0;c<this.slides.length;c++){d+=$(this.slides[c])[0].outerHTML}return d};this.update_settings=function(c){$.extend(this.settings,c)};this.update_templates=function(c){c=c||{};c.slides=this.generate_slides();$.extend(c,this.settings);this.templates.stage=nexus.get_template(this.settings.stage_template_selector);this.templates.stage=nexus.parse_template(this.templates.stage,c);c.stage=this.templates.stage;this.templates.tray=nexus.get_template(this.settings.tray_template_selector);this.templates.tray=nexus.parse_template(this.templates.tray,c);c.tray=this.templates.tray;this.templates.media_bar=nexus.get_template(this.settings.media_bar_template_selector);this.templates.media_bar=nexus.parse_template(this.templates.media_bar,c);c.media_bar=this.templates.media_bar;this.templates.gallery=nexus.get_template(this.settings.gallery_template_selector);this.templates.gallery=nexus.parse_template(this.templates.gallery,c)};this.init=function(c){this.selector=c||this.settings.query_selector;this.container=$(c).first();gallery=this;var d=$(this.container).find(".slide");$(d).each(function(f){gallery.slides[f]=$(this)});var e=this.container.attr("id")||this.prefix+"_gallery_"+Math.round(Math.random()*100);this.update_templates({id:e});this.container.replaceWith(this.templates.gallery);this.container=$("#"+e);this.buttons.fullscreen=this.container.find(".icon.fullscreen");this.add_event_listeners();return this.container}.bind(this);return this.init(a)};