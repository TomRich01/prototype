function twentyfour_gallery(e,t){return this.prefix="twentyfour",this.slides=[],this.templates={gallery:null,stage:null,media_bar:null},this.buttons={fullscreen:null,stage_nav_left:null,stage_nav_right:null,tray_nav_left:null,tray_nav_right:null},this.settings={fullscreen_icon_class:"icon-screen-full",play_icon_class:"icon-playback-play",pause_icon_class:"icon-playback-pause",nav_left_icon_class:"icon-angle-left",nav_right_icon_class:"icon-angle-right",toggle_tray_icon_class:"icon-th",gallery_template_selector:"#twentyfour_gallery_template",tray_template_selector:"#twentyfour_gallery_tray_template",media_bar_template_selector:"#twentyfour_gallery_media_bar_template",stage_template_selector:"#twentyfour_gallery_stage_template",query_selector:".gallery24"},this.go_fullscreen=function(){var e=this.container[0];e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen(),this.container.addClass("fullscreen")},this.exit_fullscreen=function(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen(),this.container.removeClass("fullscreen")},this.toggle_fullscreen=function(e){var t;t=this.container,this.container.hasClass("fullscreen")?(this.exit_fullscreen(),console.debug("here")):(this.go_fullscreen().bind(this),console.debug("else"))},this.go_to_slide=function(e){alert(e)},this.add_event_listeners=function(){var e=this;$(this.container).find(".action_area.nav.left").click(function(){}),this.buttons.fullscreen.click(e.toggle_fullscreen.bind(e))},this.generate_slides=function(){for(var e="",t=0;t<this.slides.length;t++)e+=$(this.slides[t])[0].outerHTML;return e},this.update_settings=function(e){$.extend(this.settings,e)},this.update_templates=function(e){e=e||{},e.slides=this.generate_slides(),$.extend(e,this.settings),this.templates.stage=nexus.get_template(this.settings.stage_template_selector),this.templates.stage=nexus.parse_template(this.templates.stage,e),e.stage=this.templates.stage,this.templates.tray=nexus.get_template(this.settings.tray_template_selector),this.templates.tray=nexus.parse_template(this.templates.tray,e),e.tray=this.templates.tray,this.templates.media_bar=nexus.get_template(this.settings.media_bar_template_selector),this.templates.media_bar=nexus.parse_template(this.templates.media_bar,e),e.media_bar=this.templates.media_bar,this.templates.gallery=nexus.get_template(this.settings.gallery_template_selector),this.templates.gallery=nexus.parse_template(this.templates.gallery,e)},this.init=function(e){this.selector=e||this.settings.query_selector,this.container=$(e).first(),gallery=this;var t=$(this.container).find(".slide");$(t).each(function(e){gallery.slides[e]=$(this)});var s=this.prefix+"_gallery_"+Math.round(100*Math.random());return this.update_templates({id:s}),this.container.replaceWith(this.templates.gallery),this.container=$("#"+s),this.buttons.fullscreen=this.container.find(".icon.fullscreen"),this.add_event_listeners(),this.container}.bind(this),this.init(e)}